# LeetCode 145. Binary Tree Postorder Traversal (äºŒå…ƒæ¨¹çš„å¾Œåºéæ­·)

## ğŸ“‹ é¡Œç›®èªªæ˜

### é¡Œç›®é€£çµ
- [LeetCode 145 - Binary Tree Postorder Traversal](https://leetcode.com/problems/binary-tree-postorder-traversal/)
- [åŠ›æ‰£ 145 - äºŒå‰æ¨¹çš„å¾Œåºéæ­·](https://leetcode.cn/problems/binary-tree-postorder-traversal/)

### é¡Œç›®æè¿°

çµ¦å®šä¸€æ£µäºŒå…ƒæ¨¹çš„æ ¹ç¯€é» `root`ï¼Œå›å‚³å®ƒçš„**å¾Œåºéæ­·**çµæœã€‚

### ç¯„ä¾‹

**ç¯„ä¾‹ 1:**
```
è¼¸å…¥: root = [1, null, 2, 3]
è¼¸å‡º: [3, 2, 1]

    1
     \
      2
     /
    3
```

**ç¯„ä¾‹ 2:**
```
è¼¸å…¥: root = []
è¼¸å‡º: []
```

**ç¯„ä¾‹ 3:**
```
è¼¸å…¥: root = [1]
è¼¸å‡º: [1]
```

### é™åˆ¶æ¢ä»¶
- ç¯€é»æ•¸é‡ç¯„åœï¼š`[0, 100]`
- ç¯€é»å€¼ç¯„åœï¼š`-100 <= Node.val <= 100`

---

## ğŸ’¡ è§£é¡Œæ¦‚å¿µèˆ‡å‡ºç™¼é»

### ä»€éº¼æ˜¯å¾Œåºéæ­·ï¼Ÿ

**å¾Œåºéæ­· (Postorder Traversal)** æ˜¯äºŒå…ƒæ¨¹éæ­·çš„ä¸‰ç¨®åŸºæœ¬æ–¹å¼ä¹‹ä¸€ã€‚å®ƒçš„éæ­·é †åºæ˜¯ï¼š

```
å·¦å­æ¨¹ â†’ å³å­æ¨¹ â†’ æ ¹ç¯€é» (Left â†’ Right â†’ Root)
```

é€™æ„å‘³è‘—ï¼š
1. å…ˆå®Œæ•´éæ­·å·¦å­æ¨¹çš„æ‰€æœ‰ç¯€é»
2. å†å®Œæ•´éæ­·å³å­æ¨¹çš„æ‰€æœ‰ç¯€é»
3. æœ€å¾Œæ‰è¨ªå•ç•¶å‰çš„æ ¹ç¯€é»

### ç‚ºä»€éº¼å«ã€Œå¾Œåºã€ï¼Ÿ

å› ç‚º**æ ¹ç¯€é»æœ€å¾Œè¢«è¨ªå•**ï¼Œæ‰€ä»¥ç¨±ç‚ºã€Œå¾Œã€åºéæ­·ã€‚

### å¾Œåºéæ­·çš„æ‡‰ç”¨å ´æ™¯

1. **åˆªé™¤æ¨¹**ï¼šå…ˆåˆªé™¤å­ç¯€é»ï¼Œå†åˆªé™¤çˆ¶ç¯€é»
2. **è¨ˆç®—è³‡æ–™å¤¾å¤§å°**ï¼šå…ˆè¨ˆç®—å­è³‡æ–™å¤¾ï¼Œå†ç´¯åŠ åˆ°çˆ¶è³‡æ–™å¤¾
3. **è¡¨é”å¼æ¨¹æ±‚å€¼**ï¼šå…ˆè¨ˆç®—é‹ç®—å…ƒï¼Œå†åŸ·è¡Œé‹ç®—å­
4. **é‡‹æ”¾è¨˜æ†¶é«”**ï¼šå…ˆé‡‹æ”¾å­ç¯€é»ï¼Œå†é‡‹æ”¾çˆ¶ç¯€é»

---

## ğŸ”§ è§£æ³•è©³è§£

### æ–¹æ³•ä¸€ï¼šéè¿´æ³•ï¼ˆæœ¬é¡Œå¯¦ä½œï¼‰

#### æ ¸å¿ƒæ€è·¯

ä½¿ç”¨**æ·±åº¦å„ªå…ˆæœå°‹ (DFS)** çš„éè¿´æ–¹å¼ï¼š

1. **çµ‚æ­¢æ¢ä»¶**ï¼šç•¶ç¯€é»ç‚º `null` æ™‚è¿”å›
2. **éè¿´å·¦å­æ¨¹**ï¼šå…ˆè™•ç†æ‰€æœ‰å·¦é‚Šçš„ç¯€é»
3. **éè¿´å³å­æ¨¹**ï¼šå†è™•ç†æ‰€æœ‰å³é‚Šçš„ç¯€é»
4. **è™•ç†ç•¶å‰ç¯€é»**ï¼šæœ€å¾Œå°‡ç•¶å‰ç¯€é»çš„å€¼åŠ å…¥çµæœ

#### ç¨‹å¼ç¢¼

```csharp
public IList<int> PostorderTraversal(TreeNode root)
{
    List<int> res = new List<int>();
    DFS(root, res);
    return res;
}

private void DFS(TreeNode node, List<int> list)
{
    // çµ‚æ­¢æ¢ä»¶
    if (node is null)
    {
        return;
    }
    
    // 1. éè¿´å·¦å­æ¨¹
    DFS(node.left, list);
    
    // 2. éè¿´å³å­æ¨¹
    DFS(node.right, list);
    
    // 3. è™•ç†ç•¶å‰ç¯€é»ï¼ˆå¾Œåºçš„é—œéµï¼ï¼‰
    list.Add(node.val);
}
```

#### è¤‡é›œåº¦åˆ†æ

| è¤‡é›œåº¦ | æ•¸å€¼ | èªªæ˜ |
|--------|------|------|
| æ™‚é–“è¤‡é›œåº¦ | O(n) | æ¯å€‹ç¯€é»æ°å¥½è¢«è¨ªå•ä¸€æ¬¡ |
| ç©ºé–“è¤‡é›œåº¦ | O(h) | h ç‚ºæ¨¹çš„é«˜åº¦ï¼Œç”¨æ–¼éè¿´å‘¼å«å †ç–Š |

> **ç©ºé–“è¤‡é›œåº¦è©³è§£**ï¼š
> - æœ€ä½³æƒ…æ³ï¼ˆå¹³è¡¡æ¨¹ï¼‰ï¼šO(log n)
> - æœ€å£æƒ…æ³ï¼ˆå‚¾æ–œæ¨¹ï¼‰ï¼šO(n)

---

### æ–¹æ³•äºŒï¼šè¿­ä»£æ³•ï¼ˆä½¿ç”¨å †ç–Šï¼‰

å¦‚æœé¡Œç›®è¦æ±‚ä¸ä½¿ç”¨éè¿´ï¼Œå¯ä»¥ä½¿ç”¨å †ç–Šä¾†æ¨¡æ“¬ï¼š

```csharp
public IList<int> PostorderTraversalIterative(TreeNode root)
{
    List<int> result = new List<int>();
    if (root is null) return result;
    
    Stack<TreeNode> stack = new Stack<TreeNode>();
    stack.Push(root);
    
    while (stack.Count > 0)
    {
        TreeNode node = stack.Pop();
        // å°‡å€¼æ’å…¥åˆ°çµæœçš„æœ€å‰é¢
        result.Insert(0, node.val);
        
        // å…ˆæ¨å…¥å·¦å­ç¯€é»ï¼Œå†æ¨å…¥å³å­ç¯€é»
        // é€™æ¨£å³å­ç¯€é»æœƒå…ˆè¢«è™•ç†
        if (node.left is not null)
        {
            stack.Push(node.left);
        }
        if (node.right is not null)
        {
            stack.Push(node.right);
        }
    }
    
    return result;
}
```

---

## ğŸ“ æ¼”ç¤ºæµç¨‹

ä»¥ä¸‹é¢é€™æ£µæ¨¹ç‚ºä¾‹ï¼š

```
       1
      / \
     2   3
    / \
   4   5
```

### éè¿´åŸ·è¡Œæµç¨‹

| æ­¥é©Ÿ | å‘¼å« | å‹•ä½œ | çµæœæ¸…å–® |
|------|------|------|----------|
| 1 | DFS(1) | é€²å…¥ç¯€é» 1 | [] |
| 2 | DFS(2) | é€²å…¥ç¯€é» 1 çš„å·¦å­æ¨¹ | [] |
| 3 | DFS(4) | é€²å…¥ç¯€é» 2 çš„å·¦å­æ¨¹ | [] |
| 4 | DFS(null) | ç¯€é» 4 çš„å·¦å­æ¨¹ç‚ºç©ºï¼Œè¿”å› | [] |
| 5 | DFS(null) | ç¯€é» 4 çš„å³å­æ¨¹ç‚ºç©ºï¼Œè¿”å› | [] |
| 6 | - | **åŠ å…¥ç¯€é» 4 çš„å€¼** | [4] |
| 7 | DFS(5) | é€²å…¥ç¯€é» 2 çš„å³å­æ¨¹ | [4] |
| 8 | DFS(null) | ç¯€é» 5 çš„å·¦å­æ¨¹ç‚ºç©ºï¼Œè¿”å› | [4] |
| 9 | DFS(null) | ç¯€é» 5 çš„å³å­æ¨¹ç‚ºç©ºï¼Œè¿”å› | [4] |
| 10 | - | **åŠ å…¥ç¯€é» 5 çš„å€¼** | [4, 5] |
| 11 | - | **åŠ å…¥ç¯€é» 2 çš„å€¼** | [4, 5, 2] |
| 12 | DFS(3) | é€²å…¥ç¯€é» 1 çš„å³å­æ¨¹ | [4, 5, 2] |
| 13 | DFS(null) | ç¯€é» 3 çš„å·¦å­æ¨¹ç‚ºç©ºï¼Œè¿”å› | [4, 5, 2] |
| 14 | DFS(null) | ç¯€é» 3 çš„å³å­æ¨¹ç‚ºç©ºï¼Œè¿”å› | [4, 5, 2] |
| 15 | - | **åŠ å…¥ç¯€é» 3 çš„å€¼** | [4, 5, 2, 3] |
| 16 | - | **åŠ å…¥ç¯€é» 1 çš„å€¼** | [4, 5, 2, 3, 1] |

### éè¿´å‘¼å«æ¨¹ç‹€åœ–

```
DFS(1)
â”œâ”€â”€ DFS(2)                    â† å…ˆè™•ç†å·¦å­æ¨¹
â”‚   â”œâ”€â”€ DFS(4)
â”‚   â”‚   â”œâ”€â”€ DFS(null) â† è¿”å›
â”‚   â”‚   â””â”€â”€ DFS(null) â† è¿”å›
â”‚   â”‚   â””â”€â”€ åŠ å…¥ 4 âœ“
â”‚   â””â”€â”€ DFS(5)
â”‚       â”œâ”€â”€ DFS(null) â† è¿”å›
â”‚       â””â”€â”€ DFS(null) â† è¿”å›
â”‚       â””â”€â”€ åŠ å…¥ 5 âœ“
â”‚   â””â”€â”€ åŠ å…¥ 2 âœ“
â””â”€â”€ DFS(3)                    â† å†è™•ç†å³å­æ¨¹
    â”œâ”€â”€ DFS(null) â† è¿”å›
    â””â”€â”€ DFS(null) â† è¿”å›
    â””â”€â”€ åŠ å…¥ 3 âœ“
â””â”€â”€ åŠ å…¥ 1 âœ“                   â† æœ€å¾Œè™•ç†æ ¹ç¯€é»
```

**æœ€çµ‚çµæœï¼š[4, 5, 2, 3, 1]**

---

## ğŸŒ³ Binary Tree Traversal ä¸‰ç¨®éæ­·æ–¹å¼ä»‹ç´¹

äºŒå…ƒæ¨¹çš„éæ­·æ˜¯è³‡æ–™çµæ§‹ä¸­çš„åŸºç¤æ¦‚å¿µï¼Œä¸»è¦æœ‰ä¸‰ç¨®æ·±åº¦å„ªå…ˆ (DFS) çš„éæ­·æ–¹å¼ï¼š

### 1ï¸âƒ£ å‰åºéæ­· (Preorder Traversal)

#### éæ­·é †åº
```
æ ¹ç¯€é» â†’ å·¦å­æ¨¹ â†’ å³å­æ¨¹ (Root â†’ Left â†’ Right)
```

#### ç‰¹é»
- **æ ¹ç¯€é»æœ€å…ˆ**è¢«è¨ªå•
- å¸¸ç”¨æ–¼**è¤‡è£½**ä¸€æ£µæ¨¹
- å¯ç”¨æ–¼**åºåˆ—åŒ–**æ¨¹çµæ§‹

#### ç¨‹å¼ç¢¼
```csharp
private void PreorderDFS(TreeNode node, List<int> list)
{
    if (node is null) return;
    
    list.Add(node.val);      // 1. å…ˆè™•ç†æ ¹ç¯€é»
    PreorderDFS(node.left, list);   // 2. å†è™•ç†å·¦å­æ¨¹
    PreorderDFS(node.right, list);  // 3. æœ€å¾Œè™•ç†å³å­æ¨¹
}
```

#### ç¯„ä¾‹
```
       1
      / \
     2   3
    / \
   4   5

å‰åºéæ­·çµæœï¼š[1, 2, 4, 5, 3]
```

---

### 2ï¸âƒ£ ä¸­åºéæ­· (Inorder Traversal)

#### éæ­·é †åº
```
å·¦å­æ¨¹ â†’ æ ¹ç¯€é» â†’ å³å­æ¨¹ (Left â†’ Root â†’ Right)
```

#### ç‰¹é»
- **æ ¹ç¯€é»åœ¨ä¸­é–“**è¢«è¨ªå•
- å°æ–¼**äºŒå…ƒæœå°‹æ¨¹ (BST)**ï¼Œä¸­åºéæ­·æœƒå¾—åˆ°**å‡åºæ’åˆ—**
- å¸¸ç”¨æ–¼é©—è­‰ BST çš„æ­£ç¢ºæ€§

#### ç¨‹å¼ç¢¼
```csharp
private void InorderDFS(TreeNode node, List<int> list)
{
    if (node is null) return;
    
    InorderDFS(node.left, list);    // 1. å…ˆè™•ç†å·¦å­æ¨¹
    list.Add(node.val);       // 2. å†è™•ç†æ ¹ç¯€é»
    InorderDFS(node.right, list);   // 3. æœ€å¾Œè™•ç†å³å­æ¨¹
}
```

#### ç¯„ä¾‹
```
       1
      / \
     2   3
    / \
   4   5

ä¸­åºéæ­·çµæœï¼š[4, 2, 5, 1, 3]
```

#### BST ç¯„ä¾‹
```
       4
      / \
     2   6
    / \ / \
   1  3 5  7

ä¸­åºéæ­·çµæœï¼š[1, 2, 3, 4, 5, 6, 7] â† å‡åºæ’åˆ—ï¼
```

---

### 3ï¸âƒ£ å¾Œåºéæ­· (Postorder Traversal) - æœ¬é¡Œ

#### éæ­·é †åº
```
å·¦å­æ¨¹ â†’ å³å­æ¨¹ â†’ æ ¹ç¯€é» (Left â†’ Right â†’ Root)
```

#### ç‰¹é»
- **æ ¹ç¯€é»æœ€å¾Œ**è¢«è¨ªå•
- å¸¸ç”¨æ–¼**åˆªé™¤**æ¨¹ï¼ˆå…ˆåˆªå­ç¯€é»å†åˆªçˆ¶ç¯€é»ï¼‰
- å¸¸ç”¨æ–¼è¨ˆç®—**å­æ¨¹çš„å±¬æ€§**ï¼ˆå¦‚å¤§å°ã€é«˜åº¦ï¼‰
- è¡¨é”å¼æ¨¹çš„**å¾Œç¶´è¡¨ç¤ºæ³•**

#### ç¨‹å¼ç¢¼
```csharp
private void PostorderDFS(TreeNode node, List<int> list)
{
    if (node is null) return;
    
    PostorderDFS(node.left, list);  // 1. å…ˆè™•ç†å·¦å­æ¨¹
    PostorderDFS(node.right, list); // 2. å†è™•ç†å³å­æ¨¹
    list.Add(node.val);       // 3. æœ€å¾Œè™•ç†æ ¹ç¯€é»
}
```

#### ç¯„ä¾‹
```
       1
      / \
     2   3
    / \
   4   5

å¾Œåºéæ­·çµæœï¼š[4, 5, 2, 3, 1]
```

---

### ğŸ“Š ä¸‰ç¨®éæ­·æ–¹å¼å°æ¯”

| éæ­·æ–¹å¼ | é †åº | æ ¹ç¯€é»ä½ç½® | LeetCode é¡Œè™Ÿ | ä¸»è¦æ‡‰ç”¨ |
|----------|------|------------|---------------|----------|
| å‰åº | Root â†’ Left â†’ Right | æœ€å…ˆ | [144](https://leetcode.com/problems/binary-tree-preorder-traversal/) | è¤‡è£½æ¨¹ã€åºåˆ—åŒ– |
| ä¸­åº | Left â†’ Root â†’ Right | ä¸­é–“ | [94](https://leetcode.com/problems/binary-tree-inorder-traversal/) | BST æ’åºã€é©—è­‰ |
| å¾Œåº | Left â†’ Right â†’ Root | æœ€å¾Œ | [145](https://leetcode.com/problems/binary-tree-postorder-traversal/) | åˆªé™¤æ¨¹ã€è¨ˆç®—å±¬æ€§ |

### ğŸ¯ è¨˜æ†¶å£è¨£

```
å‰åºï¼šæ ¹å·¦å³ (Root First)   â†’ æ ¹æœ€å…ˆ
ä¸­åºï¼šå·¦æ ¹å³ (Root Middle)  â†’ æ ¹åœ¨ä¸­
å¾Œåºï¼šå·¦å³æ ¹ (Root Last)    â†’ æ ¹æœ€å¾Œ
```

### è¦–è¦ºåŒ–å°æ¯”

å°æ–¼åŒä¸€æ£µæ¨¹ï¼š
```
       A
      / \
     B   C
    / \
   D   E
```

| éæ­·æ–¹å¼ | çµæœ | èªªæ˜ |
|----------|------|------|
| å‰åº | A, B, D, E, C | A æœ€å…ˆå‡ºç¾ |
| ä¸­åº | D, B, E, A, C | A åœ¨ä¸­é–“ |
| å¾Œåº | D, E, B, C, A | A æœ€å¾Œå‡ºç¾ |

---

## ğŸ”— ç›¸é—œé¡Œç›®

| é¡Œè™Ÿ | é¡Œç›® | é›£åº¦ |
|------|------|------|
| [94](https://leetcode.com/problems/binary-tree-inorder-traversal/) | Binary Tree Inorder Traversal | Easy |
| [144](https://leetcode.com/problems/binary-tree-preorder-traversal/) | Binary Tree Preorder Traversal | Easy |
| [102](https://leetcode.com/problems/binary-tree-level-order-traversal/) | Binary Tree Level Order Traversal | Medium |
| [590](https://leetcode.com/problems/n-ary-tree-postorder-traversal/) | N-ary Tree Postorder Traversal | Easy |

---

## ğŸ“š åƒè€ƒè³‡æ–™

- [Tree Traversal - Wikipedia](https://en.wikipedia.org/wiki/Tree_traversal)
- [Binary Tree - GeeksforGeeks](https://www.geeksforgeeks.org/binary-tree-data-structure/)
