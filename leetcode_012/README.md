# LeetCode 012: Integer to Roman (整數轉羅馬數字)

> **難度:** 中等  
> **標籤:** 雜湊表、數學、字串  
> **語言:** C# (.NET 10.0)

## 📝 題目描述

七個不同的符號代表羅馬數字，對應數值如下：

| 羅馬數字 | 數值 |
|---------|------|
| I       | 1    |
| V       | 5    |
| X       | 10   |
| L       | 50   |
| C       | 100  |
| D       | 500  |
| M       | 1000 |

羅馬數字由高位到低位依序附加各位的羅馬表示，轉換規則如下：

- 若數值不以 4 或 9 開頭，選擇可被減去的最大符號，附加該符號並減去其值，對餘數重複轉換
- 若數值以 4 或 9 開頭，使用減法記法：
  - 4 → IV, 9 → IX
  - 40 → XL, 90 → XC  
  - 400 → CD, 900 → CM

**約束條件:** `1 <= num <= 3999`

## 🎯 解題思路

### 核心概念
這道題的關鍵是使用 **貪婪演算法**，從最大的羅馬數字符號開始，儘可能多地使用它們。

### 設計理念
1. **預處理特殊組合**: 將所有可能的數值（包括特殊的減法組合）預先建立成映射表
2. **貪婪策略**: 總是選擇當前能使用的最大數值
3. **順序處理**: 按數值大小遞減順序處理，確保結果的正確性

### 關鍵洞察
- 羅馬數字的特殊組合（IV, IX, XL, XC, CD, CM）必須優先考慮
- 使用 Tuple 陣列建立「數值-符號」對應表，按數值遞減排序
- 這樣可以自然地實現貪婪策略，優先使用較大的符號

## 🔧 解法詳解

### 資料結構設計
```csharp
static readonly Tuple<int, string>[] valueSymbols = 
{
    new Tuple<int, string>(1000, "M"),
    new Tuple<int, string>(900, "CM"),  // 特殊組合
    new Tuple<int, string>(500, "D"),
    new Tuple<int, string>(400, "CD"),  // 特殊組合
    new Tuple<int, string>(100, "C"),
    new Tuple<int, string>(90, "XC"),   // 特殊組合
    new Tuple<int, string>(50, "L"),
    new Tuple<int, string>(40, "XL"),   // 特殊組合
    new Tuple<int, string>(10, "X"),
    new Tuple<int, string>(9, "IX"),    // 特殊組合
    new Tuple<int, string>(5, "V"),
    new Tuple<int, string>(4, "IV"),    // 特殊組合
    new Tuple<int, string>(1, "I")
};
```

### 演算法步驟
1. **建立映射表**: 包含所有可能的數值和對應的羅馬符號
2. **遍歷映射表**: 從最大數值開始遍歷
3. **貪婪使用**: 對每個數值，計算它能在輸入數字中使用多少次
4. **累積結果**: 將對應的羅馬符號添加到結果字串
5. **更新餘數**: 從輸入數字中減去已處理的部分
6. **重複處理**: 繼續處理剩餘數字，直到變為 0

### 時間與空間複雜度
- **時間複雜度**: O(1) - 因為羅馬數字符號數量固定（13個）
- **空間複雜度**: O(1) - 使用固定大小的映射表

## 📋 實作範例

```csharp
public string IntToRoman(int num)
{
    StringBuilder sb = new StringBuilder();

    foreach (Tuple<int, string> tuple in valueSymbols)
    {
        int value = tuple.Item1;
        string symbol = tuple.Item2;

        while(num >= value)
        {
            num -= value;
            sb.Append(symbol);
        }

        if(num == 0) break;
    }

    return sb.ToString();
}
```

## 🔍 執行流程演示

### 範例 1: num = 58
| 步驟 | 當前數值 | 處理符號 | 剩餘數值 | 累積結果 | 說明 |
|-----|---------|----------|----------|----------|------|
| 1   | 58      | M(1000)  | 58       | ""       | 58 < 1000，跳過 |
| 2   | 58      | CM(900)  | 58       | ""       | 58 < 900，跳過 |
| 3   | 58      | D(500)   | 58       | ""       | 58 < 500，跳過 |
| 4   | 58      | CD(400)  | 58       | ""       | 58 < 400，跳過 |
| 5   | 58      | C(100)   | 58       | ""       | 58 < 100，跳過 |
| 6   | 58      | XC(90)   | 58       | ""       | 58 < 90，跳過 |
| 7   | 58      | L(50)    | 8        | "L"      | 58 ≥ 50，使用 L |
| 8   | 8       | XL(40)   | 8        | "L"      | 8 < 40，跳過 |
| 9   | 8       | X(10)    | 8        | "L"      | 8 < 10，跳過 |
| 10  | 8       | IX(9)    | 8        | "L"      | 8 < 9，跳過 |
| 11  | 8       | V(5)     | 3        | "LV"     | 8 ≥ 5，使用 V |
| 12  | 3       | IV(4)    | 3        | "LV"     | 3 < 4，跳過 |
| 13  | 3       | I(1)     | 0        | "LVIII"  | 使用 3 次 I |

**最終結果**: 58 → "LVIII"

### 範例 2: num = 1994
| 步驟 | 當前數值 | 處理符號 | 剩餘數值 | 累積結果 | 說明 |
|-----|---------|----------|----------|----------|------|
| 1   | 1994    | M(1000)  | 994      | "M"      | 使用 1 次 M |
| 2   | 994     | CM(900)  | 94       | "MCM"    | 使用 1 次 CM |
| 3   | 94      | XC(90)   | 4        | "MCMXC"  | 使用 1 次 XC |
| 4   | 4       | IV(4)    | 0        | "MCMXCIV"| 使用 1 次 IV |

**最終結果**: 1994 → "MCMXCIV"

## 🚀 執行測試

要執行這個解決方案：

```bash
# 編譯專案
dotnet build

# 執行程式
dotnet run
```

程式將會執行以下測試案例：
- 3 → "III"
- 4 → "IV"  
- 9 → "IX"
- 58 → "LVIII"
- 1994 → "MCMXCIV"
- 3749 → "MMMDCCXLIX"

## 📚 相關知識點

### C# 技術特點
- **Tuple 應用**: 使用 Tuple<int, string> 建立映射關係
- **StringBuilder**: 高效率字串拼接
- **貪婪演算法**: 每次選擇當前最優解

### 羅馬數字規則
- 相同符號連續最多三次（如 III = 3）
- 小數字在大數字前表示減法（如 IV = 4）
- 大數字在小數字前表示加法（如 VI = 6）

## 🔗 相關連結
- [LeetCode 原題](https://leetcode.com/problems/integer-to-roman/)
- [羅馬數字維基百科](https://zh.wikipedia.org/wiki/羅馬數字)
