# LeetCode 3190. 使所有元素都可以被 3 整除的最少操作數

## 題目連結
- [英文題目](https://leetcode.com/problems/find-minimum-operations-to-make-all-elements-divisible-by-three/description/?envType=daily-question&envId=2025-11-22)
- [中文題目](https://leetcode.cn/problems/find-minimum-operations-to-make-all-elements-divisible-by-three/description/?envType=daily-question&envId=2025-11-22)

## 題目描述

給定一個整數陣列 `nums`。一次操作可以將任一元素加 1 或減 1。

返回使所有元素都可以被 3 整除所需的最少操作次數。

### 範例

**範例 1:**
```
輸入: nums = [1,2,3,4]
輸出: 3
說明:
- 對 1 減 1 得到 0 (3 的倍數)
- 對 2 加 1 得到 3 (3 的倍數)
- 對 4 減 1 得到 3 (3 的倍數)
總共需要 3 次操作
```

**範例 2:**
```
輸入: nums = [3,6,9]
輸出: 0
說明: 所有元素已經都是 3 的倍數
```

## 解題思路

### 核心觀察

遍歷 `nums`，按照元素模 3 的餘數分類：

1. **如果 `nums[i] = 3k`** (餘數為 0)
   - 該元素已經是 3 的倍數
   - **無需操作**

2. **如果 `nums[i] = 3k+1`** (餘數為 1)
   - 減 1 即可得到 `3k` (3 的倍數)
   - **需要 1 次操作**

3. **如果 `nums[i] = 3k+2`** (餘數為 2)
   - 加 1 即可得到 `3(k+1)` (3 的倍數)
   - **需要 1 次操作**

### 關鍵結論

由此可見，對於不是 3 的倍數的元素，只需操作一次就可以變成 3 的倍數。

**所以答案為不是 3 的倍數的元素個數。**

## 演算法流程

1. 初始化計數器 `res = 0`
2. 遍歷陣列中的每個元素 `num`
3. 對每個元素執行 `num % 3`:
   - 如果結果不為 0，則 `res++`
4. 返回 `res`

## 程式碼實作

```csharp
public int MinimumOperations(int[] nums)
{
    int res = 0;
    
    // 遍歷陣列中的每個元素
    foreach(int num in nums)
    {
        // 如果元素不能被 3 整除，則需要一次操作
        // num % 3 == 1 時，減 1 變成 3 的倍數
        // num % 3 == 2 時，加 1 變成 3 的倍數
        res += num % 3 != 0 ? 1 : 0;
    }
    
    return res;
}
```

## 複雜度分析

### 時間複雜度
- **O(n)**
  - 其中 n 是陣列長度
  - 只需遍歷陣列一次

### 空間複雜度
- **O(1)**
  - 只使用常數額外空間
  - 只需要一個計數器變數

## 測試案例分析

### 測試案例 1: [1,2,3,4]
```
元素 1: 1 % 3 = 1 (需要操作) ✓
元素 2: 2 % 3 = 2 (需要操作) ✓
元素 3: 3 % 3 = 0 (無需操作) ✗
元素 4: 4 % 3 = 1 (需要操作) ✓

結果: 3 次操作
```

### 測試案例 2: [3,6,9]
```
元素 3: 3 % 3 = 0 (無需操作) ✗
元素 6: 6 % 3 = 0 (無需操作) ✗
元素 9: 9 % 3 = 0 (無需操作) ✗

結果: 0 次操作
```

### 測試案例 3: [1,2,4,5,7,8]
```
元素 1: 1 % 3 = 1 (需要操作) ✓
元素 2: 2 % 3 = 2 (需要操作) ✓
元素 4: 4 % 3 = 1 (需要操作) ✓
元素 5: 5 % 3 = 2 (需要操作) ✓
元素 7: 7 % 3 = 1 (需要操作) ✓
元素 8: 8 % 3 = 2 (需要操作) ✓

結果: 6 次操作
```

## 總結

這是一道簡單的數學題，關鍵在於理解模運算的性質：
- 任何整數模 3 的結果只有 0、1、2 三種可能
- 餘數為 1 或 2 的數字，只需一次加減操作即可變成 3 的倍數
- 因此答案就是統計餘數不為 0 的元素個數

---

**參考來源:** [靈茶山艾府的題解](https://leetcode.cn/problems/find-minimum-operations-to-make-all-elements-divisible-by-three/solutions/2819079/bian-li-pythonjavacgo-by-endlesscheng-sflg/)
