# LeetCode 2048: Next Greater Numerically Balanced Number

> ä¸‹ä¸€å€‹æ›´å¤§çš„æ•¸å€¼å¹³è¡¡æ•¸

[![LeetCode](https://img.shields.io/badge/LeetCode-2048-FFA116?logo=leetcode)](https://leetcode.com/problems/next-greater-numerically-balanced-number/)
[![Difficulty](https://img.shields.io/badge/Difficulty-Medium-orange)](https://leetcode.com/problems/next-greater-numerically-balanced-number/)
[![Language](https://img.shields.io/badge/Language-C%23-239120?logo=csharp)](https://learn.microsoft.com/dotnet/csharp/)

## ğŸ“‹ é¡Œç›®æè¿°

ä¸€å€‹æ•´æ•¸ `x` æ˜¯**æ•¸å€¼å¹³è¡¡çš„ï¼ˆNumerically Balancedï¼‰**ï¼Œå¦‚æœå°æ–¼ `x` ä¸­çš„æ¯å€‹æ•¸å­— `d`ï¼Œåœ¨ `x` ä¸­æ°å¥½æœ‰ `d` å€‹è©²æ•¸å­—çš„å‡ºç¾æ¬¡æ•¸ã€‚

çµ¦å®šä¸€å€‹æ•´æ•¸ `n`ï¼Œè¿”å›**åš´æ ¼å¤§æ–¼ `n` çš„æœ€å°æ•¸å€¼å¹³è¡¡æ•¸**ã€‚

### ç¯„ä¾‹èªªæ˜

**ç¯„ä¾‹ 1:**

```text
è¼¸å…¥: n = 1
è¼¸å‡º: 22
è§£é‡‹: 22 æ˜¯æ•¸å€¼å¹³è¡¡çš„ï¼Œå› ç‚ºï¼š
     - æ•¸å­— 2 å‡ºç¾äº† 2 æ¬¡
```

**ç¯„ä¾‹ 2:**

```text
è¼¸å…¥: n = 1000
è¼¸å‡º: 1333
è§£é‡‹: 1333 æ˜¯æ•¸å€¼å¹³è¡¡çš„ï¼Œå› ç‚ºï¼š
     - æ•¸å­— 1 å‡ºç¾äº† 1 æ¬¡
     - æ•¸å­— 3 å‡ºç¾äº† 3 æ¬¡
```

**ç¯„ä¾‹ 3:**

```text
è¼¸å…¥: n = 3000
è¼¸å‡º: 3133
è§£é‡‹: 3133 æ˜¯æ•¸å€¼å¹³è¡¡çš„ï¼Œå› ç‚ºï¼š
     - æ•¸å­— 1 å‡ºç¾äº† 1 æ¬¡
     - æ•¸å­— 3 å‡ºç¾äº† 3 æ¬¡
```

### é™åˆ¶æ¢ä»¶

- `0 <= n <= 10^6`

## ğŸ¯ å•é¡Œæ ¸å¿ƒ

### ä»€éº¼æ˜¯æ•¸å€¼å¹³è¡¡æ•¸

æ•¸å€¼å¹³è¡¡æ•¸å¿…é ˆæ»¿è¶³ä¸€å€‹é—œéµç‰¹æ€§ï¼š**æ•¸å­—æœ¬èº«çš„å€¼ = è©²æ•¸å­—åœ¨æ•´å€‹æ•¸ä¸­å‡ºç¾çš„æ¬¡æ•¸**

è®“æˆ‘å€‘åˆ†æå¹¾å€‹ä¾‹å­ï¼š

| æ•¸å­— | æ˜¯å¦å¹³è¡¡ | åŸå›  |
|------|---------|------|
| 1 | âŒ | æ•¸å­— 1 å‡ºç¾ 1 æ¬¡ï¼Œä½†é€™ä¸æ§‹æˆå¤šä½æ•¸çš„å¹³è¡¡ï¼ˆé¡Œç›®è¦æ±‚åš´æ ¼å¤§æ–¼çµ¦å®šçš„æ•¸ï¼‰ |
| 22 | âœ… | æ•¸å­— 2 å‡ºç¾ 2 æ¬¡ âœ“ |
| 122 | âœ… | æ•¸å­— 1 å‡ºç¾ 1 æ¬¡ âœ“ï¼Œæ•¸å­— 2 å‡ºç¾ 2 æ¬¡ âœ“ |
| 333 | âœ… | æ•¸å­— 3 å‡ºç¾ 3 æ¬¡ âœ“ |
| 1333 | âœ… | æ•¸å­— 1 å‡ºç¾ 1 æ¬¡ âœ“ï¼Œæ•¸å­— 3 å‡ºç¾ 3 æ¬¡ âœ“ |
| 4444 | âœ… | æ•¸å­— 4 å‡ºç¾ 4 æ¬¡ âœ“ |
| 123 | âŒ | æ•¸å­— 1 å‡ºç¾ 1 æ¬¡ âœ“ï¼Œæ•¸å­— 2 å‡ºç¾ 1 æ¬¡ âœ—ï¼ˆæ‡‰è©²å‡ºç¾ 2 æ¬¡ï¼‰ï¼Œæ•¸å­— 3 å‡ºç¾ 1 æ¬¡ âœ—ï¼ˆæ‡‰è©²å‡ºç¾ 3 æ¬¡ï¼‰ |

## ğŸ” è§£é¡Œæ€è·¯

### æ–¹æ³•ä¸€ï¼šæš´åŠ›æšèˆ‰ï¼ˆBrute Forceï¼‰

**æ ¸å¿ƒæ¦‚å¿µï¼š** å¾ `n+1` é–‹å§‹é€ä¸€æª¢æŸ¥æ¯å€‹æ•¸å­—ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€å€‹æ•¸å€¼å¹³è¡¡æ•¸ã€‚

**æ­¥é©Ÿï¼š**

1. å¾ `n + 1` é–‹å§‹éæ­·
2. å°æ¯å€‹æ•¸å­—ï¼Œçµ±è¨ˆå…¶å„ä½æ•¸å­—çš„å‡ºç¾æ¬¡æ•¸
3. æª¢æŸ¥æ˜¯å¦æ»¿è¶³æ•¸å€¼å¹³è¡¡çš„æ¢ä»¶ï¼š
   - æ¯å€‹å‡ºç¾çš„æ•¸å­— `d`ï¼Œå…¶å‡ºç¾æ¬¡æ•¸å¿…é ˆæ°å¥½ç­‰æ–¼ `d`
   - å¦‚æœæ•¸å­— `d` å‡ºç¾åœ¨æ•¸ä¸­ï¼Œä½†å‡ºç¾æ¬¡æ•¸ä¸ç­‰æ–¼ `d`ï¼Œå‰‡ä¸å¹³è¡¡
4. æ‰¾åˆ°ç¬¬ä¸€å€‹å¹³è¡¡æ•¸å³è¿”å›

**å„ªé»ï¼š**

- å¯¦ä½œç°¡å–®ç›´è§€
- ä¸éœ€è¦è¤‡é›œçš„æ•¸å­¸æ¨å°

**ç¼ºé»ï¼š**

- æ™‚é–“è¤‡é›œåº¦è¼ƒé«˜ï¼Œæœ€å£æƒ…æ³éœ€è¦æª¢æŸ¥å¤§é‡æ•¸å­—
- ç•¶ `n` å¾ˆå¤§æ™‚æ•ˆç‡ä¸ä½³

### æ–¹æ³•äºŒï¼šé å…ˆç”Ÿæˆæ‰€æœ‰æ•¸å€¼å¹³è¡¡æ•¸ï¼ˆå„ªåŒ–ç‰ˆ - éœæ…‹å¿«å–ï¼‰

**æ ¸å¿ƒæ¦‚å¿µï¼š** è§€å¯Ÿåˆ°æ•¸å€¼å¹³è¡¡æ•¸çš„æ•¸é‡æœ‰é™ï¼Œä½¿ç”¨éœæ…‹å¿«å–å’Œ Lazy Initialization ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹³è¡¡æ•¸ï¼ˆåªç”Ÿæˆä¸€æ¬¡ï¼Œä¹‹å¾Œé‡è¤‡ä½¿ç”¨ï¼‰ï¼Œç„¶å¾Œç”¨äºŒåˆ†æœå°‹æ‰¾åˆ°ç­”æ¡ˆã€‚

**é—œéµè§€å¯Ÿï¼š**

1. **æ•¸å€¼å¹³è¡¡æ•¸çš„ç¨€ç¼ºæ€§ï¼š** åœ¨ `[1, 10^6]` ç¯„åœå…§ï¼Œæ•¸å€¼å¹³è¡¡æ•¸éå¸¸å°‘ï¼ˆç´„ 80 å€‹ï¼‰
2. **æ•¸å­—çµ„åˆçš„é™åˆ¶ï¼š**
   - æ•¸å­— 0 ä¸èƒ½å‡ºç¾ï¼ˆ0 å‡ºç¾ 0 æ¬¡æ²’æœ‰æ„ç¾©ï¼‰
   - æ•¸å­— 1-7 å¯èƒ½å‡ºç¾
   - æ•¸å­— 8ã€9 åŸºæœ¬ä¸å¯èƒ½ï¼ˆéœ€è¦è‡³å°‘ 8 æˆ– 9 ä½æ•¸ï¼Œè¶…å‡ºç¯„åœï¼‰
3. **ä½æ•¸é™åˆ¶ï¼š** åœ¨ 10^6 ä»¥å…§ï¼Œæœ€å¤š 7 ä½æ•¸

**å¯èƒ½çš„æ•¸å­—çµ„åˆï¼š**

- å–®ä¸€æ•¸å­—ï¼š`22`, `333`, `4444`, `55555`, `666666`
- çµ„åˆæ•¸å­—ï¼š`1333`, `3133`, `3313`, `3331`ï¼ˆæ•¸å­— 1 å’Œ 3 çš„çµ„åˆï¼‰
- æ›´å¤šçµ„åˆï¼š`122444`, `1224444` ç­‰

**å¯¦ä½œæ­¥é©Ÿï¼š**

1. **éœæ…‹å¿«å–æ©Ÿåˆ¶ï¼š** ä½¿ç”¨éœæ…‹æ¬„ä½ `_cachedBalancedNumbers` å­˜å„²å¹³è¡¡æ•¸åˆ—è¡¨
2. **Lazy Initializationï¼š** ç¬¬ä¸€æ¬¡å‘¼å«æ™‚æ‰ç”Ÿæˆåˆ—è¡¨ï¼Œä¹‹å¾Œç›´æ¥ä½¿ç”¨å¿«å–
3. **åŸ·è¡Œç·’å®‰å…¨ï¼š** ä½¿ç”¨é›™é‡æª¢æŸ¥é–å®šæ¨¡å¼ï¼ˆDouble-Check Lockingï¼‰ç¢ºä¿å¤šåŸ·è¡Œç·’ç’°å¢ƒä¸‹åªç”Ÿæˆä¸€æ¬¡
4. **ç”Ÿæˆå¹³è¡¡æ•¸ï¼š** æš´åŠ›æšèˆ‰ `[1, 10^6]` ç¯„åœå…§çš„æ‰€æœ‰æ•¸å­—ï¼Œæª¢æŸ¥æ¯å€‹æ•¸å­—æ˜¯å¦ç‚ºå¹³è¡¡æ•¸
5. **äºŒåˆ†æœå°‹ï¼š** å°çµ¦å®šçš„ `n`ï¼Œåœ¨å·²æ’åºçš„åˆ—è¡¨ä¸­ä½¿ç”¨äºŒåˆ†æœå°‹æ‰¾åˆ°ç¬¬ä¸€å€‹å¤§æ–¼ `n` çš„æ•¸å€¼å¹³è¡¡æ•¸

**å„ªåŒ–ç‰¹é»ï¼š**

- **åªç”Ÿæˆä¸€æ¬¡ï¼š** ä½¿ç”¨éœæ…‹å¿«å–ï¼Œé¿å…é‡è¤‡è¨ˆç®—
- **å»¶é²åˆå§‹åŒ–ï¼š** åªåœ¨éœ€è¦æ™‚æ‰ç”Ÿæˆåˆ—è¡¨
- **åŸ·è¡Œç·’å®‰å…¨ï¼š** é›™é‡æª¢æŸ¥é–å®šæ¨¡å¼ç¢ºä¿åœ¨å¤šåŸ·è¡Œç·’ç’°å¢ƒä¸‹çš„æ­£ç¢ºæ€§

**å„ªé»ï¼š**

- æŸ¥è©¢é€Ÿåº¦æ¥µå¿« O(log k)ï¼Œk ç‚ºå¹³è¡¡æ•¸çš„ç¸½æ•¸ï¼ˆç´„ 80 å€‹ï¼‰
- ç‰¹åˆ¥é©åˆå¤šæ¬¡æŸ¥è©¢å ´æ™¯
- ä½¿ç”¨éœæ…‹å¿«å–ï¼Œå¾ŒçºŒå‘¼å«å¹¾ä¹æ²’æœ‰é¡å¤–é–‹éŠ·
- åŸ·è¡Œç·’å®‰å…¨

**ç¼ºé»ï¼š**

- é¦–æ¬¡å‘¼å«éœ€è¦é è™•ç†æ™‚é–“ï¼ˆéæ­· 10^6 å€‹æ•¸å­—ï¼‰
- éœ€è¦é¡å¤–ç©ºé–“å­˜å„²å¹³è¡¡æ•¸åˆ—è¡¨ï¼ˆç´„ 80 å€‹æ•´æ•¸ï¼‰
- å¦‚æœåªæŸ¥è©¢ä¸€æ¬¡ï¼Œé è™•ç†å¯èƒ½æ˜¯æµªè²»

### æ–¹æ³•ä¸‰ï¼šå›æº¯æ³•ç”Ÿæˆï¼ˆBacktrackingï¼‰

**æ ¸å¿ƒæ¦‚å¿µï¼š** å¾ `n+1` çš„ä½æ•¸é–‹å§‹ï¼Œä½¿ç”¨å›æº¯æ³•æ§‹é€ å¯èƒ½çš„æ•¸å€¼å¹³è¡¡æ•¸ã€‚

**æ­¥é©Ÿï¼š**

1. ç¢ºå®šç›®æ¨™æ•¸å­—çš„ä½æ•¸ç¯„åœ
2. å°æ¯å€‹ä½æ•¸ï¼Œä½¿ç”¨å›æº¯æ³•å˜—è©¦æ§‹é€ æ•¸å€¼å¹³è¡¡æ•¸ï¼š
   - é¸æ“‡æ•¸å­— 1-7
   - ç¢ºä¿æ¯å€‹æ•¸å­—å‡ºç¾çš„æ¬¡æ•¸ç­‰æ–¼å…¶å€¼
   - å‰ªæï¼šå¦‚æœç•¶å‰æ§‹é€ çš„æ•¸å­—å·²ç¶“ä¸å¯èƒ½å¹³è¡¡ï¼Œæå‰çµ‚æ­¢
3. æ‰¾åˆ°ç¬¬ä¸€å€‹å¤§æ–¼ `n` çš„å¹³è¡¡æ•¸

**å„ªé»ï¼š**

- ä¸éœ€è¦é å…ˆç”Ÿæˆæ‰€æœ‰æ•¸å­—
- å¯ä»¥ææ—©çµ‚æ­¢æœå°‹

## ğŸ’¡ ç ´é¡Œé—œéµ

1. **ç†è§£æ•¸å€¼å¹³è¡¡çš„å®šç¾©ï¼š** æ•¸å­—çš„å€¼ = å‡ºç¾æ¬¡æ•¸
2. **è§€å¯Ÿæ•¸å­—ç¯„åœï¼š** åœ¨ 10^6 ä»¥å…§ï¼Œå¹³è¡¡æ•¸éå¸¸ç¨€å°‘
3. **é¸æ“‡åˆé©çš„æ–¹æ³•ï¼š**
   - å¦‚æœåªéœ€è¦è§£æ±ºä¸€æ¬¡ï¼Œæš´åŠ›æšèˆ‰å³å¯
   - å¦‚æœéœ€è¦å¤šæ¬¡æŸ¥è©¢ï¼Œé ç”Ÿæˆåˆ—è¡¨æ›´å„ª
4. **é‚Šç•Œæ¢ä»¶ï¼š** æ³¨æ„ n = 0 æ™‚çš„ç‰¹æ®Šæƒ…æ³
5. **å„ªåŒ–æ–¹å‘ï¼š** å¯ä»¥è·³éæ˜é¡¯ä¸å¯èƒ½å¹³è¡¡çš„æ•¸å­—ï¼ˆä¾‹å¦‚åŒ…å« 0 çš„æ•¸å­—ï¼‰

## ğŸ“ å»¶ä¼¸æ€è€ƒ

1. å¦‚ä½•è­‰æ˜åœ¨æŸå€‹ç¯„åœå…§æ•¸å€¼å¹³è¡¡æ•¸çš„ä¸Šé™ï¼Ÿ
2. æ˜¯å¦å­˜åœ¨é€šç”¨å…¬å¼ç›´æ¥è¨ˆç®—ä¸‹ä¸€å€‹å¹³è¡¡æ•¸ï¼Ÿ
3. å¦‚æœç¯„åœæ“´å¤§åˆ° 10^9ï¼Œå“ªç¨®æ–¹æ³•æœ€æœ‰æ•ˆï¼Ÿ
4. å¦‚ä½•å„ªåŒ–æª¢æŸ¥å¹³è¡¡çš„å‡½å¼æ•ˆèƒ½ï¼Ÿ

## ğŸ”— ç›¸é—œé€£çµ

- [LeetCode é¡Œç›®é€£çµ](https://leetcode.com/problems/next-greater-numerically-balanced-number/)
- [LeetCode CN é¡Œç›®é€£çµ](https://leetcode.cn/problems/next-greater-numerically-balanced-number/)

---

**Daily Question:** 2025-10-24
